<form action="<%= page_url(@page) %>" method="POST">
  <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
  <input type="hidden" name="_method" value="PUT">
  Logo Image Url:<input type="text" name="page[logo_url]" value="<%= @page.logo_url %>"><br>
  Background Image Url:<input type="text" name="page[background_url]" value="<%= @page.background_url %>"><br>
  Banner Image Url:<input type="text" name="page[banner_url]" value="<%= @page.banner_url %>"><br>

  <br><br><br>

  <div class="editable-containers">
    <% @containers.each_with_index do |container, i| %>
      <div class="single-container">
        Link to image:<input type="text" name="container[<%= i %>][image_url]" value="<%= container.image_url %>"><br>
        Image links to:<input type="text" name="container[<%= i %>][image_url_link]" value="<%= container.image_url_link %>"><br>
        Body: <br><textarea name="container[<%= i %>][body]"><%= container.body %></textarea><br>
        <button class="remove-container" data-id="<%= container.id %>">Remove!</button><br><hr>
      </div>
    <% end %>
  </div>
  <div class="new-editable-containers">
  </div>

  <div class="new-container-button">
    <button class="add-container">Add Container!</button><br><br>
  </div>



  <input type="submit" value="Update Page!">
</form>

<script>
  $(document).ready(function(){
    $(".single-container").on("click", "button", function(event){
      event.preventDefault();
      var $button = $(event.currentTarget);
      var $div = $button.closest("div");
      var containerId = $button.attr("data-id");
      $div.html("");
      $.ajax({
        type:"DELETE",
        url:"/containers/" + containerId,
        success: function(resp){

        }
      })

    })

    var n = 0;
    $(".new-container-button").on("click","button",function(event){
      event.preventDefault();
      var renderedContent = JST['new_container_form']({num: n});
      $(".new-editable-containers").append(renderedContent)
      n++;
    });
    $(".new-editable-containers").on("click","button",function(event){
      event.preventDefault();
      $(event.currentTarget).closest("div").html("");
    })

  });
</script>